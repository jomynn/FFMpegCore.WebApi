<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FFMpegCore Dashboard</title>
    <link rel="stylesheet" href="/css/styles.css">
</head>
<body>
    <header>
        <h1>Dashboard</h1>
        <div id="login-detail-container"></div> <!-- Placeholder for login details -->
    </header>
    <main>
        <div id="sidebar-container" aria-label="Sidebar"></div> <!-- Sidebar dynamically loaded -->

        <div class="content">
            <!-- Add visually distinct error message container -->
            <div id="errorMessage" style="display: none; color: red; font-weight: bold;"></div>

            <!-- Merge Multiple Videos -->
            <section id="mergeVideosSection">
                <h2>Merge Multiple Videos</h2>
                <form id="mergeVideosForm">
                    <label for="fileList">Select Video Files:</label>
                    <div id="fileCheckboxContainer">
                        <!-- Checkboxes will be dynamically populated -->
                    </div>
                    <textarea id="selectedFiles" name="selectedFiles" placeholder="Selected files will appear here..." readonly></textarea>
                    <button type="submit">Merge Videos</button>
                </form>
                <p id="outputMessage1"></p> <!-- Placeholder for success or error messages -->
            </section>

            <!-- Merge Audio + Video -->
            <section id="mergeAudioVideo">
                <h2>Merge Audio with Video</h2>
                <form id="mergeAudioVideoForm">
                    <label for="fileList2">Select Video Files:</label>
                    <div id="fileCheckboxContainer2">
                        <!-- Checkboxes will be dynamically populated -->
                    </div>
                    <textarea id="selectedFiles2" name="selectedFiles" placeholder="Selected files will appear here..." readonly></textarea>
                    <button type="submit">Merge Audio + Video</button>
                </form>
                <p id="outputMessage2"></p> <!-- Placeholder for success or error messages -->
            </section>

            <!-- Analyse Media -->
            <section id="analyseMedia">
                <h1>Analyse Media</h1>
                <form id="analyseMediaForm">
                    <label for="fileList3">Select Media Files:</label>
                    <div id="fileCheckboxContainer3">
                        <!-- Checkboxes will be dynamically populated -->
                    </div>
                    <textarea id="selectedFiles3" name="selectedFiles" placeholder="Selected files will appear here..." readonly></textarea>                    <button type="submit">Submit Analy Media</button>
                </form>
                <p id="outputMessage3"></p> <!-- Placeholder for success or error messages -->
            </section>

            <!-- Video Caption -->
            <section id="addVideoCaption">
                <h1>Caption Video</h1>
                <form id="addVideoCaptionForm">
                    <label for="fileList4">Select Video Files:</label>
                    <div id="fileCheckboxContainer4">
                        <!-- Checkboxes will be dynamically populated -->
                    </div>
                    <label for="captionText">Caption Text:</label><br>
                    <textarea id="captionText" name="captionText" placeholder="Enter caption text" rows="4" cols="50" required></textarea><br><br>

                    <button type="submit">Submit</button>
                </form>
                <p id="outputMessage4"></p> <!-- Placeholder for success or error messages -->
            </section>

            <!-- Progress and Output -->
            <section id="progress">
                <h2>Progress</h2>
                <progress id="progressBar" max="100" value="0"></progress>
                <p id="progressText">Progress: 0%</p>
            </section>

            <section id="output">
                <h2>Output</h2>
                <p id="outputMessage"></p>
            </section>
        </div>
    </main>
    <footer>
        <section id="swagger">
            <!-- Link to Swagger -->
            <a href="/swagger" target="_blank">Go to Swagger Documentation</a>
        </section>
    </footer>
    <script type="module" src="/js/jwtToken.js"></script>
    <script type="module" src="/js/sidebar.js"></script>

    <script type="module"> import { mergeVideos } from './js/scripts.js';

        // Attach the event listener to the form
        const mergeVideosForm = document.getElementById("mergeVideosForm");
        mergeVideosForm.addEventListener("submit", mergeVideos);
    </script>


</body>
</html>
